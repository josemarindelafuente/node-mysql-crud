<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NODE</title>
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap5.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">

</head>
<body>

<div class="container">

    <h1>plantilla index</h1>

    <hr>

    <a href="/create">
      <button class="btn btn-primary"><i class="fa-solid fa-plus"></i> Agregar</button>
    </a>

    <hr>

<table class="table" id="usersTable">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Name</th>
        <th scope="col">Email</th>
        <th scope="col">Rol</th>
        <th scope="col">Acciones</th>
      </tr>
    </thead>
    <tbody>
        


            <% results.forEach( (user)=>{ %>
                        
                <tr>
                    <th scope="row"> <%= user.id  %></th>
                    <td><%= user.name  %></td>
                    <td><%= user.email  %></td>
                    <td><%= user.rol  %></td>
                    <td>
                        <a href="/edit/<%= user.id  %>" class="btn btn-info"><i class="fa-regular fa-pen-to-square"></i> Editar</a>
                        <a onclick="confirmation(<%= user.id  %>)" class="btn btn-danger"><i class="fa-regular fa-trash-can"></i> Eliminar</a>
                    </td>
                </tr>
                             
            <% }) %>



    </tbody>
  </table>

</div>
    



    
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.26/dist/sweetalert2.all.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>

<script>


$(document).ready(function () {
    $('#usersTable').DataTable();
});

function confirmation(id){
  Swal.fire({
  title: 'Seguro que quieres eliminar este registro?',
  icon: 'warning',
  showCancelButton: true,
  confirmButtonColor: '#3085d6',
  cancelButtonColor: '#d33',
  confirmButtonText: 'SÃ­, borar!'
}).then((result) => {
  if (result.isConfirmed) {
    window.location = "/delete/" + id;
  }
})
}  
</script>
</body>
</html>


